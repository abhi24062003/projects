<html>
<head>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <style>
        h4 {
            padding: 0;
            margin: 0;
        }

        p {
            margin: 2px;
        }

        .div100 {
            width: 100%;
            box-sizing: border-box;
        }

        .main {
            width: 1350px;
        }

        .dflex {
            display: flex;
        }

        .div30 {
            width: 33%;
            margin: 5px 5px;
            padding: 10px;
            background-color: rgb(218, 218, 218);
        }

        .container {
            padding: 10px;
            background-color: rgba(164, 170, 170, 0.514);
        }

        .dnon {
            display: none !important;
        }

        .dvisible {
            display: block !important;
            z-index: 2 !important;
        }

        .flex-direction {
            flex-direction: column;
        }

        .promain {
            width: 20%;
            text-align: center;
            border: 1px solid;
            margin: 0 5px;
        }

        .div40 {
            width: 30%;
        }

        .catlistcss {
            text-transform: capitalize;
            font-size: x-large;
            font-weight: 500;
            padding: 5px;
            margin: 10px 0;
            background-color: #e3e0e0;
            border: 2px rgb(58, 58, 58) solid;
        }

        .selectedCat {
            background-color: #fdbfbf !important;
            border: 2px black solid !important;
        }

        li {
            padding: 5px 0px;
            margin: 5px 0px;
            border: 1px solid;
            width: 100px;
        }
    </style>
    <div class="div100">
        <div class="main">
            <div class="div100 dflex" style=" height: 70vh; border: 1px solid; padding: 15px;">
                <div class="div100 dflex flex-direction"
                    style="width: 40%; border: 1px solid; align-items: center;overflow-y: scroll; margin-right: 25px;">
                    <input type="search" name="" id="searchProduct"
                        style="height: 30px; width: 300px; margin-bottom: 10px; justify-self: center; margin-top: 10px;" placeholder="Search" disabled
                        onkeyup="displayProduct(this)">
                    <div id="selectlist"></div>
                    <div id="listProduct" style="width: 100%; display: flex; flex-wrap:wrap; overflow-y: scroll;">
                    </div>
                </div>
                <div id="listcatagory" class="div40 dflex flex-direction"
                    style="width: 15%; padding: 0 5px; border: 1px solid; text-align: center;overflow-y: scroll; margin-right: 25px;">
                    <h2 style>Catagory</h2>
                </div>
                <div
                    style="width: 40%; display: flex;flex-wrap: wrap;border: 1px solid; justify-content: space-between;">
                    <div id="listorder"
                        style="width: 100%; height: 55vh; display: flex;flex-wrap: wrap;border: 1px solid; justify-content: space-between;overflow-y: scroll;">
                    </div>
                    <div id="billing" style=" height: 20%; width: 100%; border-top: 3px solid;
                    align-self: end;">
                        <p id="spangrandTotal" style="display: block;"> GrandTotal = <span id="grandTotal"></span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    <script>
        var list = {
            fruits: [
                {
                    name: "apple",
                    img: "image/apple.jpeg",
                    price: "110rs",
                    qut: 10
                },
                {
                    name: "banana",
                    img: "image/banana.jpeg",
                    price: "120rs",
                    qut: 5
                },
                {
                    name: "watermelon",
                    img: "image/watermelon.jpeg",
                    price: "50rs",
                    qut: 4
                },
                {
                    name: "orange",
                    img: "image/orange.jpeg",
                    price: "80rs",
                    qut: 12
                },
                {
                    name: "strawberry",
                    img: "image/strawberry.jpeg",
                    price: "150rs",
                    qut: 8
                },
                {
                    name: "mango",
                    img: "image/mango.jpeg",
                    price: "90rs",
                    qut: 7
                },
                {
                    name: "grape",
                    img: "image/grape.jpeg",
                    price: "70rs",
                    qut: 9
                },
                {
                    name: "cherry",
                    img: "image/cherry.jpeg",
                    price: "160rs",
                    qut: 6
                },
                {
                    name: "kiwi",
                    img: "image/kiwi.jpeg",
                    price: "120rs",
                    qut: 10
                },
                {
                    name: "pineapple",
                    img: "image/pineapple.jpeg",
                    price: "75rs",
                    qut: 11
                }
            ],
            vegetables: [
                {
                    name: "carrot",
                    img: "image/carrot.jpeg",
                    price: "30rs",
                    qut: 8
                },
                {
                    name: "tomato",
                    img: "image/tomato.jpeg",
                    price: "40rs",
                    qut: 12
                },
                {
                    name: "broccoli",
                    img: "image/broccoli.jpeg",
                    price: "60rs",
                    qut: 6
                },
                {
                    name: "cucumber",
                    img: "image/cucumber.jpeg",
                    price: "25rs",
                    qut: 15
                },
                {
                    name: "lettuce",
                    img: "image/lettuce.jpeg",
                    price: "20rs",
                    qut: 9
                },
                {
                    name: "onion",
                    img: "image/onion.jpeg",
                    price: "40rs",
                    qut: 13
                },
                {
                    name: "pepper",
                    img: "image/pepper.jpeg",
                    price: "35rs",
                    qut: 10
                },
                {
                    name: "potato",
                    img: "image/potato.jpeg",
                    price: "20rs",
                    qut: 18
                },
                {
                    name: "spinach",
                    img: "image/spinach.jpeg",
                    price: "35rs",
                    qut: 7
                },
                {
                    name: "zucchini",
                    img: "image/zucchini.jpeg",
                    price: "30rs",
                    qut: 14
                }
            ],
            clothing: [
                {
                    name: "t-shirt",
                    img: "image/tshirt.jpeg",
                    price: "25rs",
                    qut: 15
                },
                {
                    name: "jeans",
                    img: "image/jeans.jpeg",
                    price: "50rs",
                    qut: 7
                },
                {
                    name: "dress",
                    img: "image/dress.jpeg",
                    price: "40rs",
                    qut: 12
                },
                {
                    name: "jacket",
                    img: "image/jacket.jpeg",
                    price: "70rs",
                    qut: 9
                },
                {
                    name: "shoes",
                    img: "image/shoes.jpeg",
                    price: "60rs",
                    qut: 11
                },
                {
                    name: "hat",
                    img: "image/hat.jpeg",
                    price: "15rs",
                    qut: 10
                },
                {
                    name: "sweater",
                    img: "image/sweater.jpeg",
                    price: "55rs",
                    qut: 8
                },
                {
                    name: "pants",
                    img: "image/pants.jpeg",
                    price: "45rs",
                    qut: 13
                },
                {
                    name: "scarf",
                    img: "image/scarf.jpeg",
                    price: "20rs",
                    qut: 16
                },
                {
                    name: "socks",
                    img: "image/socks.jpeg",
                    price: "10rs",
                    qut: 17
                }
            ],
            electronics: [
                {
                    name: "smartphone",
                    img: "image/smartphone.jpeg",
                    price: "300rs",
                    qut: 3
                },
                {
                    name: "laptop",
                    img: "image/laptop.jpeg",
                    price: "800rs",
                    qut: 5
                },
                {
                    name: "tablet",
                    img: "image/tablet.jpeg",
                    price: "200rs",
                    qut: 7
                },
                {
                    name: "headphones",
                    img: "image/headphones.jpeg",
                    price: "50rs",
                    qut: 10
                },
                {
                    name: "camera",
                    img: "image/camera.jpeg",
                    price: "400rs",
                    qut: 4
                },
                {
                    name: "smartwatch",
                    img: "image/smartwatch.jpeg",
                    price: "150rs",
                    qut: 8
                },
                {
                    name: "printer",
                    img: "image/printer.jpeg",
                    price: "100rs",
                    qut: 6
                },
                {
                    name: "speaker",
                    img: "image/speaker.jpeg",
                    price: "40rs",
                    qut: 12
                },
                {
                    name: "gaming console",
                    img: "image/console.jpeg",
                    price: "250rs",
                    qut: 5
                },
                {
                    name: "router",
                    img: "image/router.jpeg",
                    price: "30rs",
                    qut: 14
                }
            ],
            books: [

            ],
            household: [

            ],
            sports: [

            ]
        };

        var orderiteam = [];

        function displayprodcut() {
            for (let catagory in list) {
                singleCat = list[catagory]
                let cat = document.createElement("div");
                cat.id = "cat" + catagory
                cat.innerHTML = `<div  id=catname${catagory} class="catlistcss" onclick="objpass('${encodeURI(JSON.stringify(list[catagory]))}',event)">${catagory}</div>`
                document.getElementById("listcatagory").appendChild(cat);
            }
            try {

                arrowkey()
            } catch (error) {
            }
        }
        displayprodcut()
        var selectedCat = null

        function objpass(value, e) {
            // console.log("selectedCat", e.target);
            if (document.getElementById("iteamlist")) {
                document.getElementById("iteamlist").innerHTML = ""
            }
            var allCat = (document.querySelectorAll('.catlistcss'))
            allCat.forEach(one => one.classList.remove("selectedCat"));
            e.target.classList.add("selectedCat")
            selectedCat = [];
            document.getElementById('searchProduct').value = ""

            value = JSON.parse(decodeURI(value))
            selectedCat = value
            document.getElementById("searchProduct").disabled = false;

        }

        function add(obj) {
            var orderlist = []
            obj = JSON.parse(decodeURI(obj))
            orderlist.push(obj)
            console.log(orderlist);
            for (let one of orderlist) {
                let orderItem = document.createElement("div");
                orderItem.id = "order" + one.name
                orderItem.innerHTML = `<div>
                        <span>${one.name}</span>
                            <i style="border: 1px solid; background-color: red;  padding: 2px;" class="fa fa-remove" remove = ""></i>
                    </div>`
                document.getElementById("checkout").appendChild(orderItem);
            }
        }

        var selected = []
        function displayProduct(parms) {
            selected = []
            singleCat = parms.value
            let flag = false
            document.getElementById("listProduct").innerHTML = ""
            for (let pro of selectedCat) {
                flag += pro.name.startsWith(singleCat)
                if (pro.name.startsWith(singleCat) && singleCat != "") {
                    if (!selected.includes(pro.name)) {
                        selected.push(pro)
                        addli(selected)
                    }
                } else if (singleCat == "") {
                    selected = []
                    document.getElementById("listProduct").innerHTML = "Enter Name"
                }
            }
            if (!flag) {
                selected = []
            }
            if (selected.length > 0) {
            }
            else {
                document.getElementById("selectlist").innerHTML = ""
            }
        }

        setInterval(function () {
            if (selectedCat == null) {

                document.getElementById("searchProduct").disabled = true;
                document.getElementById("searchProduct").value = ""
                                                                                                                    
            }
        }, 1)



        var count = 0
        function addli(parms) {
            let creatUL = document.createElement("div");
            creatUL.id = 'iteamlist'
            document.getElementById("selectlist").appendChild(creatUL);
            document.getElementById("iteamlist").innerHTML = ""
            for (let single of parms) {
                let creatli = document.createElement("li");
                creatli.id = 'li' + single.name
                creatli.innerText = single.name
                creatli.setAttribute("onclick", `additeam('${encodeURI(JSON.stringify(single))}')`)
                count++
                document.getElementById("iteamlist").appendChild(creatli);
            }
        }


        var ordervalue = []
        function additeam(param) {
            param = JSON.parse(decodeURI(param))
            // console.log(param);
            let i = 0
            let flag = true
            do {
                if (ordervalue.length == 0) {
                    flag = true
                } else if (ordervalue.length > 0) {
                    if (param.name == ordervalue[i].name) {
                        flag = false
                    }
                }
                i++
            } while (i < ordervalue.length)
            if (flag) {

                param['orderqut'] = 1
                ordervalue.push(param)
            }
            displayorder(ordervalue, "add");
        }

        function removeiteam(params) {
            console.log(ordervalue, "removeiteam");
            params = JSON.parse(decodeURI(params))
            for (let one of ordervalue) {
                if (one.name == params.name) {
                    var j = ordervalue.indexOf(one)
                    break
                }
            }
            ordervalue.splice(j, 1)
            displayorder(ordervalue, "remove");
        }

        function displayorder(object, action) {
            console.log(object, "displayorder");
            document.getElementById("listorder").innerHTML = ""
            for (let one of object) {
                let div = document.createElement("div");
                div.id = "div" + one.name
                div.innerHTML = `<div style="width: 100%; margin:2px" >
                        <div style="display: flex; width: 250px; border: 1px solid;  align-items: center; flex-direction: column;">
                            <h4 >${one.name}</h4>
                            <span style="color:red;visibility: hidden ;" id=quterror${one.name}> Available stock is only ${one.qut}</span>
                            <div style="display: flex; border-top: 1px solid; align-items: center;">
                            <img src="image/apple.jpeg" alt="" width="50px" height="50px" style="margin-right: 10px;">
                            <div style="display: flex; align-items: center; justify-content: space-between; width:25%;">
                                <div style="margin-right: 7px;">
                                    <p> Price</p>
                                    <p>${one.price}</p>
                                </div>
                                <div style="display: flex; align-items: center;"> 
                                    <label>Qut <input type="number" name=${one.name} id=orderIteam${one.name} value=${one.orderqut} style="height: 33px;
                                    width: 60px; margin-right: 10px;"></label>
                                    <i style="border: 1px solid; background-color: red;  padding: 2px; height: 20px;"
                                        class="fa fa-remove" id=remove${one.name}></i>
                                </div>
                            </div>
                            </div>
                            <p id=subtotal${one.name}></p>
                        </div>
                    </div>`
                document.getElementById("listorder").appendChild(div);
                document.getElementById("remove" + one.name).setAttribute("onclick", `removeiteam('${encodeURI(JSON.stringify(one))}')`)
                document.getElementById("orderIteam" + one.name).setAttribute("onchange", `qutcheck('${encodeURIComponent(JSON.stringify(one))}');`)
                document.getElementById("orderIteam" + one.name).setAttribute("onkeyup", `qutcheck('${encodeURIComponent(JSON.stringify(one))}');`)
                total()
            }


        }
        function total() {
            let grandTotal = 0
            console.log((ordervalue), "total");
            for (let one of ordervalue) {
                let q = parseInt(one.orderqut)
                let p = parseInt(one.price)
                let subtotal = q * p
                if (document.getElementById("subtotal" + one.name)) {
                    document.getElementById("subtotal" + one.name).innerText = `Sub Total = ${subtotal}`
                } grandTotal += subtotal

            }
            document.getElementById('grandTotal').innerText = grandTotal
        }
        function qutcheck(value) {
            let qut = JSON.parse(decodeURIComponent(value))

            if (document.getElementById("orderIteam" + qut.name).value >= qut.qut) {
                document.getElementById("orderIteam" + qut.name).value = qut.qut
                document.getElementById("quterror" + qut.name).style.visibility = "visible"

            } else {
                document.getElementById("quterror" + qut.name).style.visibility = "hidden"
            }
            for (let one of ordervalue) {
                if (one.name == qut.name) {
                    index = ordervalue.indexOf(one)
                    break
                }
            }
            ordervalue[index].orderqut = document.getElementById("orderIteam" + qut.name).value


            total()

        }


        // var ncount = 0
        // function arrowkey() {
        //     document.getElementById('searchProduct').addEventListener("keydown", console.log("aa"))
        //     // function (event) {

        //     //     if (count > selected.length) {
        //     //         if (event.keyCode === 40 && event.target === this) {
        //     //             event.preventDefault()
        //     //             console.log(count);
        //     ncount++
        //     //         }
        //     //     }
        //     // }
        // }
    </script>
</body>
</html>
<!-- //     let div = document.createElement("div");
                    //     div.id = "div" + pro.name
                    //     div.classList.add("promain")
                    //     div.innerHTML = `  <div>
                    //     <h4 style="border-top: 1px solid; border-bottom: 1px solid;" id=name${pro.name}> ${pro.name} </h4>
                    //     <img src="image/apple.jpeg" alt="" width="80%" id=img${pro.name}>
                    //     <div class="dflex" style="align-items: center;">
                    //         <div
                    //             style=" border: 1px solid black; display: flex; align-items: center; flex-direction: column;width: 100%;">
                    //             <p> Price </p>
                    //             <p>${pro.price}</p>
                    //         </div>
                    //         <div
                    //             style=" border: 1px solid black; display: flex; align-items: center; flex-direction: column;width: 100%;">
                    //             <p> Qut </p>
                    //             <p>${pro.qut}</p>
                    //         </div>
                    //     </div>
                    //     <div style="margin: 5px;">
                    //         <button onclick="add('${encodeURI(JSON.stringify(pro))}')">Add</button>
                    //     </div>
                    // </div>`
                    //     document.getElementById("listProduct").appendChild(div); -->

                <polygon id="logo-40-a" points=".06 .11 1783.89 .11 1783.89 1784 .06 1784"></polygon>